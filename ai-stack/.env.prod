# =================================================================
# AI Stack Production Environment Configuration
# Optimized for Mac Mini M4 (10-core CPU, up to 64GB RAM)
# =================================================================

# =================================================================
# GENERAL CONFIGURATION
# =================================================================
TIMEZONE=America/New_York
NODE_ENV=production

# =================================================================
# POSTGRESQL DATABASE CONFIGURATION (with Vector & AI Extensions)
# Optimized for personal production use
# =================================================================
POSTGRES_USER=aistack_prod
POSTGRES_PASSWORD='CHANGE_THIS_SECURE_PASSWORD'
POSTGRES_DB=aistack_production
POSTGRES_ADDITIONAL_DBS=n8n_prod,litellm_prod
POSTGRES_PORT=5432

# Vector Extension Configuration
POSTGRES_VECTOR_EXTENSION=true
POSTGRES_PGAI_EXTENSION=true

# Mac Mini M4 Optimized Resources (increased for AI workloads)
POSTGRES_MEMORY_LIMIT=4G
POSTGRES_CPU_LIMIT=3.0
POSTGRES_MEMORY_RESERVATION=1G
POSTGRES_CPU_RESERVATION=1.0

# =================================================================
# REDIS CONFIGURATION
# =================================================================
REDIS_PASSWORD='CHANGE_THIS_SECURE_REDIS_PASSWORD'
REDIS_PORT=6379
REDIS_MAX_MEMORY=1G

# Resource Limits
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=1.0
REDIS_MEMORY_RESERVATION=256M
REDIS_CPU_RESERVATION=0.25

# =================================================================
# N8N WORKFLOW AUTOMATION
# Production Configuration
# =================================================================
N8N_VERSION=latest
N8N_PORT=5678
N8N_HOST=0.0.0.0
N8N_PROTOCOL=http
N8N_WEBHOOK_URL=http://localhost:5678

# Security - CHANGE THESE!
N8N_ENCRYPTION_KEY='CHANGE_THIS_32_CHAR_ENCRYPTION_KEY'
N8N_SECURE_COOKIE=true
N8N_DB_SCHEMA=n8n_prod

# Production Features
N8N_METRICS=true
N8N_LOG_LEVEL=warn
N8N_USER_MANAGEMENT_DISABLED=false
N8N_PUBLIC_API_DISABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_RUNNERS_ENABLED=true
N8N_AI_ENABLED=true

# Mac Mini M4 Optimized Resources
N8N_MEMORY_LIMIT=6G
N8N_CPU_LIMIT=4.0
N8N_MEMORY_RESERVATION=2G
N8N_CPU_RESERVATION=1.0
N8N_MAX_MEMORY=4096

# API Configuration
N8N_API_KEY='CHANGE_THIS_N8N_API_KEY'

# =================================================================
# OLLAMA AI MODEL SERVER
# Optimized for Llama 3.2 models
# =================================================================
OLLAMA_VERSION=latest
OLLAMA_PORT=11434
OLLAMA_KEEP_ALIVE=24h
OLLAMA_MAX_MODELS=2
OLLAMA_PARALLEL=1
OLLAMA_FLASH_ATTENTION=true

# Mac Mini M4 Optimized for Llama 3.2 (up to 8B parameters)
OLLAMA_MEMORY_LIMIT=16G
OLLAMA_CPU_LIMIT=8.0
OLLAMA_MEMORY_RESERVATION=4G
OLLAMA_CPU_RESERVATION=2.0

# =================================================================
# OPEN WEBUI CONFIGURATION
# Family-friendly production setup
# =================================================================
WEBUI_VERSION=main
WEBUI_PORT=8080
WEBUI_SECRET_KEY='CHANGE_THIS_WEBUI_SECRET_KEY'
WEBUI_NAME=Family AI Assistant
WEBUI_URL=http://localhost:8080

# Family Authentication
ENABLE_SIGNUP=false
WEBUI_AUTH=true
DEFAULT_USER_ROLE=user
DEFAULT_LOCALE=en-US

# Llama 3.2 Configuration
DEFAULT_MODELS=llama3.2:3b,llama3.2:1b
RAG_EMBEDDING_MODEL=nomic-embed-text
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Family-safe Features
ENABLE_RAG_WEB_SEARCH=true
ENABLE_IMAGE_GENERATION=false
SAFE_MODE=true

# Integration
LITELLM_BASE_URL=http://litellm:4000

# Resource Limits
WEBUI_MEMORY_LIMIT=2G
WEBUI_CPU_LIMIT=2.0
WEBUI_MEMORY_RESERVATION=512M
WEBUI_CPU_RESERVATION=0.5

# =================================================================
# LITELLM PROXY CONFIGURATION
# Production setup for model management
# =================================================================
LITELLM_VERSION=main-stable
LITELLM_PORT=4000
LITELLM_MASTER_KEY='CHANGE_THIS_LITELLM_MASTER_KEY'
LITELLM_SALT_KEY='CHANGE_THIS_LITELLM_SALT_KEY'
LITELLM_UI_USERNAME=admin
LITELLM_UI_PASSWORD='CHANGE_THIS_LITELLM_UI_PASSWORD'
LITELLM_LOG_LEVEL=WARN

# Resource Limits
LITELLM_MEMORY_LIMIT=2G
LITELLM_CPU_LIMIT=2.0
LITELLM_MEMORY_RESERVATION=512M
LITELLM_CPU_RESERVATION=0.5

# =================================================================
# N8N MCP SERVER CONFIGURATION
# =================================================================
N8N_MCP_VERSION=latest
N8N_MCP_PORT=3000
N8N_MCP_AUTH_TOKEN='CHANGE_THIS_N8N_MCP_AUTH_TOKEN'
MCP_MODE=http
USE_FIXED_HTTP=true
N8N_MCP_LOG_LEVEL=warn
N8N_MCP_DISABLE_CONSOLE=true
TRUST_PROXY=true

# Resource Limits
N8N_MCP_MEMORY_LIMIT=1G
N8N_MCP_CPU_LIMIT=1.0
N8N_MCP_MEMORY_RESERVATION=256M
N8N_MCP_CPU_RESERVATION=0.25

# =================================================================
# MCPO (MCP ORCHESTRATOR) CONFIGURATION
# =================================================================
MCPO_VERSION=main
MCPO_PORT=8000
MCPO_API_KEY='CHANGE_THIS_MCPO_API_KEY'
MCPO_SERVER_TYPE=streamable_http
MCPO_LOG_LEVEL=warn

# Resource Limits
MCPO_MEMORY_LIMIT=512M
MCPO_CPU_LIMIT=0.5
MCPO_MEMORY_RESERVATION=128M
MCPO_CPU_RESERVATION=0.1

# =================================================================
# BACKUP CONFIGURATION
# Automated daily backups with encryption
# =================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE='0 3 * * *'
BACKUP_RETENTION_DAYS=90
BACKUP_ENCRYPT=true
BACKUP_ENCRYPTION_KEY='CHANGE_THIS_BACKUP_ENCRYPTION_KEY'
BACKUP_LOCATION='/Users/$(whoami)/Documents/ai-stack-backups'

# =================================================================
# MONITORING (OPTIONAL FOR PRODUCTION)
# =================================================================
MONITORING_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD='CHANGE_THIS_GRAFANA_PASSWORD'
